{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adrian/Desktop/CDA2026/app/api/create-default-users/route.ts"],"sourcesContent":["// API Route para crear usuarios predefinidos desde la aplicación\n// Acceder a: POST /api/create-default-users\n\nimport { createClient } from \"@supabase/supabase-js\"\nimport { NextResponse } from \"next/server\"\n\nexport async function POST() {\n  try {\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\n    if (!supabaseUrl || !supabaseServiceKey) {\n      return NextResponse.json({ error: \"Configuración de Supabase incompleta\" }, { status: 500 })\n    }\n\n    const supabaseAdmin = createClient(supabaseUrl, supabaseServiceKey, {\n      auth: {\n        autoRefreshToken: false,\n        persistSession: false,\n      },\n    })\n\n    // Insertar/actualizar usuarios de ejemplo directamente en la tabla users (requiere columna \"password\")\n    const users = [\n      {\n        email: \"admin@cda2026.local\",\n        username: \"admin\",\n        nombre: \"Administrador CDA 2026\",\n        rol: \"admin\",\n        password: \"CDA2026admin!\",\n      },\n      {\n        email: \"miembro@cda2026.local\",\n        username: \"miembro\",\n        nombre: \"Miembro Test\",\n        rol: \"miembro\",\n        password: \"CDA2026member!\",\n      },\n    ]\n\n    const { error: upsertError } = await supabaseAdmin.from(\"users\").upsert(users, { onConflict: \"email\" })\n    if (upsertError) {\n      console.error(\"Error creando usuarios:\", upsertError.message)\n      return NextResponse.json({ error: \"Error creando usuarios\", details: upsertError.message }, { status: 500 })\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: \"Usuarios predefinidos creados exitosamente\",\n      users: users.map((u) => ({ username: u.username, email: u.email, password: u.password, rol: u.rol })),\n    })\n  } catch (error) {\n    console.error(\"Error:\", error)\n    return NextResponse.json(\n      { error: \"Error creando usuarios\", details: error instanceof Error ? error.message : \"Error desconocido\" },\n      { status: 500 },\n    )\n  }\n}\n"],"names":[],"mappings":"AAAA,iEAAiE;AACjE,4CAA4C;;;;;AAE5C;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM;QACN,MAAM,qBAAqB,QAAQ,GAAG,CAAC,yBAAyB;QAEhE,IAAI,CAAC,eAAe,CAAC,oBAAoB;YACvC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuC,GAAG;gBAAE,QAAQ;YAAI;QAC5F;QAEA,MAAM,gBAAgB,IAAA,yMAAY,EAAC,aAAa,oBAAoB;YAClE,MAAM;gBACJ,kBAAkB;gBAClB,gBAAgB;YAClB;QACF;QAEA,uGAAuG;QACvG,MAAM,QAAQ;YACZ;gBACE,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,KAAK;gBACL,UAAU;YACZ;YACA;gBACE,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,KAAK;gBACL,UAAU;YACZ;SACD;QAED,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,cAAc,IAAI,CAAC,SAAS,MAAM,CAAC,OAAO;YAAE,YAAY;QAAQ;QACrG,IAAI,aAAa;YACf,QAAQ,KAAK,CAAC,2BAA2B,YAAY,OAAO;YAC5D,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;gBAA0B,SAAS,YAAY,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QAC5G;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,OAAO,MAAM,GAAG,CAAC,CAAC,IAAM,CAAC;oBAAE,UAAU,EAAE,QAAQ;oBAAE,OAAO,EAAE,KAAK;oBAAE,UAAU,EAAE,QAAQ;oBAAE,KAAK,EAAE,GAAG;gBAAC,CAAC;QACrG;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,UAAU;QACxB,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAA0B,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAoB,GACzG;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}